



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Micro Development Kit for IoT Applications using nRF52840 SoC">
      
      
        <link rel="canonical" href="https://wiki.makerdiary.co/nrf52840-mdk/mesh/">
      
      
        <meta name="author" content="makerdiary">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.7.3">
    
    
      
        <title>nRF5 SDK for Mesh - nRF52840-MDK Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.c61db26e.css">
      
    
    
      <script src="../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="marsala" data-md-color-accent="marsala">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#nrf5-sdk-for-mesh-software-development-kit-for-bluetooth-mesh-solutions-using-nrf51-series-and-nrf52-series" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://wiki.makerdiary.co/nrf52840-mdk/" title="nRF52840-MDK Documentation" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                nRF52840-MDK Documentation
              </span>
              <span class="md-header-nav__topic">
                nRF5 SDK for Mesh
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/makerdiary/nrf52840-mdk" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      makerdiary/nrf52840-mdk
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Introduction" class="md-tabs__link md-tabs__link--active">
        Introduction
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../cn/" title="中文文档" class="md-tabs__link">
          中文文档
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/logo.svg" width="48" height="48">
      
    </span>
    nRF52840-MDK Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/makerdiary/nrf52840-mdk" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      makerdiary/nrf52840-mdk
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../nrf5-sdk/" title="nRF5 SDK" class="md-nav__link">
      nRF5 SDK
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        nRF5 SDK for Mesh
      </label>
    
    <a href="./" title="nRF5 SDK for Mesh" class="md-nav__link md-nav__link--active">
      nRF5 SDK for Mesh
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-toolchain" title="Installing the toolchain" class="md-nav__link">
    Installing the toolchain
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cmake" title="CMake" class="md-nav__link">
    CMake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnu-arm-embedded-toolchain" title="GNU Arm Embedded Toolchain" class="md-nav__link">
    GNU Arm Embedded Toolchain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ninja" title="Ninja" class="md-nav__link">
    Ninja
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-the-mesh-stack-and-examples" title="Building the mesh stack and examples" class="md-nav__link">
    Building the mesh stack and examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-the-sdks" title="Download the SDKs" class="md-nav__link">
    Download the SDKs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-support-for-nrf52840-mdk" title="Adding support for nRF52840-MDK" class="md-nav__link">
    Adding support for nRF52840-MDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-with-cmake" title="Building with CMake" class="md-nav__link">
    Building with CMake
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-example" title="Running the example" class="md-nav__link">
    Running the example
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#programming-the-softdevice" title="Programming the SoftDevice" class="md-nav__link">
    Programming the SoftDevice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-the-application" title="Programming the application" class="md-nav__link">
    Programming the application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-build" title="Creating a new build" class="md-nav__link">
    Creating a new build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-examples" title="More examples" class="md-nav__link">
    More examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-issue" title="Create an Issue" class="md-nav__link">
    Create an Issue
  </a>
  
</li>
      
      
      
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../openthread/" title="OpenThread" class="md-nav__link">
      OpenThread
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mbedos/" title="Arm Mbed OS" class="md-nav__link">
      Arm Mbed OS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../zephyr/" title="Zephyr" class="md-nav__link">
      Zephyr
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../mynewt/" title="Mynewt" class="md-nav__link">
      Mynewt
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../daplink/" title="DAPLink" class="md-nav__link">
      DAPLink
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-buy/" title="How to Buy" class="md-nav__link">
      How to Buy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../LICENSE/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      中文文档
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        中文文档
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/" title="简介" class="md-nav__link">
      简介
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/getting-started/" title="快速入门" class="md-nav__link">
      快速入门
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/nrf5-sdk/" title="nRF5 SDK" class="md-nav__link">
      nRF5 SDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/mesh/" title="nRF5 SDK for Mesh" class="md-nav__link">
      nRF5 SDK for Mesh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/openthread/" title="OpenThread" class="md-nav__link">
      OpenThread
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/mbedos/" title="Arm Mbed OS" class="md-nav__link">
      Arm Mbed OS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/zephyr/" title="Zephyr" class="md-nav__link">
      Zephyr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/mynewt/" title="Mynewt" class="md-nav__link">
      Mynewt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/daplink/" title="DAPLink" class="md-nav__link">
      DAPLink
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/how-to-buy/" title="如何购买" class="md-nav__link">
      如何购买
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/CONTRIBUTING/" title="反馈&贡献" class="md-nav__link">
      反馈&贡献
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cn/LICENSE/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-toolchain" title="Installing the toolchain" class="md-nav__link">
    Installing the toolchain
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cmake" title="CMake" class="md-nav__link">
    CMake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnu-arm-embedded-toolchain" title="GNU Arm Embedded Toolchain" class="md-nav__link">
    GNU Arm Embedded Toolchain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ninja" title="Ninja" class="md-nav__link">
    Ninja
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-the-mesh-stack-and-examples" title="Building the mesh stack and examples" class="md-nav__link">
    Building the mesh stack and examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download-the-sdks" title="Download the SDKs" class="md-nav__link">
    Download the SDKs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-support-for-nrf52840-mdk" title="Adding support for nRF52840-MDK" class="md-nav__link">
    Adding support for nRF52840-MDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-with-cmake" title="Building with CMake" class="md-nav__link">
    Building with CMake
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-example" title="Running the example" class="md-nav__link">
    Running the example
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#programming-the-softdevice" title="Programming the SoftDevice" class="md-nav__link">
    Programming the SoftDevice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-the-application" title="Programming the application" class="md-nav__link">
    Programming the application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-a-new-build" title="Creating a new build" class="md-nav__link">
    Creating a new build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-examples" title="More examples" class="md-nav__link">
    More examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-issue" title="Create an Issue" class="md-nav__link">
    Create an Issue
  </a>
  
</li>
      
      
      
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="nrf5-sdk-for-mesh-software-development-kit-for-bluetooth-mesh-solutions-using-nrf51-series-and-nrf52-series">nRF5 SDK for Mesh <br><small>Software Development Kit for Bluetooth mesh solutions using nRF51 Series and nRF52 Series</small><a class="headerlink" href="#nrf5-sdk-for-mesh-software-development-kit-for-bluetooth-mesh-solutions-using-nrf51-series-and-nrf52-series" title="Permanent link">&para;</a></h1>
<p><a href="http://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF5-SDK-for-Mesh"><img alt="" src="./images/mesh_icon_small.png" /></a></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The nRF5 SDK for Mesh is Nordic Semiconductor's implementation of the <a href="https://www.bluetooth.com/bluetooth-technology/topology-options/le-mesh">Bluetooth Mesh</a>. It allows applications to utilize the features provided by the Bluetooth Mesh when running on Nordic's nRF5 Series chips.</p>
<p>The addition of mesh networking capabilities to Bluetooth Low Energy enables extended range, increases the number of nodes and a many-to-many (m:m) communication topology. In a Bluetooth mesh network every received packet is broadcasted by relays, until the packet is received by the destination node (a so called managed flooding mesh.) A simple, but effective way of spreading information across the mesh network with no single point of failure. The mesh functionality is a significant update and enables new applications for Bluetooth in smart home, lighting, beaconing and asset tracking applications.</p>
<p><img alt="" src="./images/mesh-network_topology.png" /></p>
<p>For more information, go to <a href="http://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF5-SDK-for-Mesh">nordicsemi.com</a>.</p>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>You can find detailed information about Bluetooth Mesh in <a href="https://blog.bluetooth.com/introducing-bluetooth-mesh-networking">Bluetooth SIG's introduction to Bluetooth Mesh</a> and the <a href="https://www.bluetooth.com/specifications/mesh-specifications?_ga=2.18257471.723078495.1501226603-93769939.1480503530">Bluetooth Mesh Networking Specifications</a>.</p>
<p>The following documentation sections provide detailed information about the required software toolchains and the process of building a mesh stack.</p>
<h3 id="installing-the-toolchain">Installing the toolchain<a class="headerlink" href="#installing-the-toolchain" title="Permanent link">&para;</a></h3>
<p>To build the example applications, a toolchain based on either CMake is required. Install instructions are provided for macOS. The steps should be similar for other platforms.</p>
<h4 id="cmake">CMake<a class="headerlink" href="#cmake" title="Permanent link">&para;</a></h4>
<p><a href="https://cmake.org/">CMake</a> is a build management system used for managing an environment that is independent of the compiler and build system used. Version 3.6 or above is required by the mesh stack.</p>
<p>Install CMake using <code>brew</code> on macOS:</p>
<div class="codehilite"><pre><span></span>$ brew install cmake
</pre></div>

<h4 id="gnu-arm-embedded-toolchain">GNU Arm Embedded Toolchain<a class="headerlink" href="#gnu-arm-embedded-toolchain" title="Permanent link">&para;</a></h4>
<p>The GNU Embedded Toolchain for Arm is a ready-to-use, open source suite of tools for C, C++ and Assembly programming targeting Arm Cortex-M and Cortex-R family of processors. It includes the GNU Compiler (GCC) and is available free of charge directly from Arm for embedded software development on Windows, Linux and macOS operating systems.</p>
<p>Download and install the <code>6-2017-q2-update</code> version. Then make sure to add the path to your toolchain to your OS PATH environment variable:</p>
<p><a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads"><button data-md-color-primary="marsala">Download</button></a></p>
<div class="codehilite"><pre><span></span><span class="c1"># in ~/.bash_profile, add the following script</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;&lt;path to install directory&gt;/gcc-arm-none-eabi-6-2017-q2-update/bin:</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

<p>Adding the path makes it possible to run the toolchain executables from any directory using the terminal. To verify that the path is set correctly, type the following in your terminal:</p>
<div class="codehilite"><pre><span></span>$ arm-none-eabi-gcc --version
</pre></div>

<h4 id="ninja">Ninja<a class="headerlink" href="#ninja" title="Permanent link">&para;</a></h4>
<p><a href="https://ninja-build.org/">Ninja</a> is a small build system with a focus on speed. It differs from other build systems in two major respects: it is designed to have its input files generated by a higher-level build system, and it is designed to run builds as fast as possible.</p>
<p>Install Ninja using <code>brew</code> on macOS:</p>
<div class="codehilite"><pre><span></span>$ brew install ninja
</pre></div>

<h3 id="building-the-mesh-stack-and-examples">Building the mesh stack and examples<a class="headerlink" href="#building-the-mesh-stack-and-examples" title="Permanent link">&para;</a></h3>
<p>The mesh library and example applications can be built using <a href="https://cmake.org/">CMake</a> mentioned above.</p>
<p>Before you continue, check <a href="#installing-the-toolchain">Installing the toolchain</a> for instructions on setting up the development environment for mesh.</p>
<h4 id="download-the-sdks">Download the SDKs<a class="headerlink" href="#download-the-sdks" title="Permanent link">&para;</a></h4>
<p>The nRF5 SDK for Mesh now requires the nRF5 SDK to compile. You can download them using the following links:</p>
<ul>
<li><a href="http://www.nordicsemi.com/eng/nordic/Products/nRF5-SDK/nRF5-SDK-zip/59011">nRF5 SDK</a></li>
<li><a href="http://www.nordicsemi.com/eng/nordic/Products/nRF5-SDK-for-Mesh/nRF5-SDK-for-Mesh/62377">nRF5 SDK for Mesh</a></li>
</ul>
<p>By default, the nRF5 SDK is expected to be adjacent to the nRF5 SDK for Mesh. The directory structure should look like this:</p>
<div class="codehilite"><pre><span></span>.
├── nrf5_SDK_for_Mesh_v2.0.1_src/
└── nRF5_SDK_15.0.0_a53641a/
</pre></div>

<h4 id="adding-support-for-nrf52840-mdk">Adding support for nRF52840-MDK<a class="headerlink" href="#adding-support-for-nrf52840-mdk" title="Permanent link">&para;</a></h4>
<p>To add support for nRF52840-MDK, you must create a support file with the name <code>custom_board.h</code>. This file must be located in a directory in the <code>nRF5_SDK_15.0.0_a53641a/components/boards/</code> path. </p>
<p>The easiest way to create the <code>custom_board.h</code> file is to start with an existing platform definition file (for example <code>pca10056.h</code>) and adapt it to:</p>
<div class="codehilite"><pre><span></span><span class="cp">#ifndef CUSTOM_BOARD_H</span>
<span class="cp">#define CUSTOM_BOARD_H</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="p">{</span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;nrf_gpio.h&quot;</span><span class="cp"></span>

<span class="c1">// LEDs definitions for nRF52840-MDK</span>
<span class="cp">#define LEDS_NUMBER    3</span>

<span class="cp">#define LED_1          NRF_GPIO_PIN_MAP(0,22)</span>
<span class="cp">#define LED_2          NRF_GPIO_PIN_MAP(0,23)</span>
<span class="cp">#define LED_3          NRF_GPIO_PIN_MAP(0,24)</span>
<span class="cp">#define LED_START      LED_1</span>
<span class="cp">#define LED_STOP       LED_3</span>

<span class="cp">#define LEDS_ACTIVE_STATE 0</span>

<span class="cp">#define LEDS_LIST { LED_1, LED_2, LED_3 }</span>

<span class="cp">#define LEDS_INV_MASK  LEDS_MASK</span>

<span class="cp">#define BSP_LED_0      22</span>
<span class="cp">#define BSP_LED_1      23</span>
<span class="cp">#define BSP_LED_2      24</span>
<span class="cp">#define BSP_LED_3      25   </span><span class="c1">// not on the board</span>

<span class="cp">#define BUTTONS_NUMBER 1</span>

<span class="cp">#define BUTTON_1       NRF_GPIO_PIN_MAP(1,0)</span>
<span class="cp">#define BUTTON_PULL    NRF_GPIO_PIN_PULLUP</span>

<span class="cp">#define BUTTONS_ACTIVE_STATE 0</span>

<span class="cp">#define BUTTONS_LIST { BUTTON_1 }</span>

<span class="cp">#define BSP_BUTTON_0   BUTTON_1</span>


<span class="cp">#define RX_PIN_NUMBER  19</span>
<span class="cp">#define TX_PIN_NUMBER  20</span>
<span class="cp">#define CTS_PIN_NUMBER 7  </span><span class="c1">// not used</span>
<span class="cp">#define RTS_PIN_NUMBER 5  </span><span class="c1">// not used</span>
<span class="cp">#define HWFC           false</span>

<span class="cp">#define BSP_QSPI_SCK_PIN   NRF_GPIO_PIN_MAP(1,3)</span>
<span class="cp">#define BSP_QSPI_CSN_PIN   NRF_GPIO_PIN_MAP(1,6)</span>
<span class="cp">#define BSP_QSPI_IO0_PIN   NRF_GPIO_PIN_MAP(1,5)</span>
<span class="cp">#define BSP_QSPI_IO1_PIN   NRF_GPIO_PIN_MAP(1,4)</span>
<span class="cp">#define BSP_QSPI_IO2_PIN   NRF_GPIO_PIN_MAP(1,2)</span>
<span class="cp">#define BSP_QSPI_IO3_PIN   NRF_GPIO_PIN_MAP(1,1)</span>


<span class="cp">#ifdef __cplusplus</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="c1">// CUSTOM_BOARD_H</span>
</pre></div>

<p>Then create a CMake file with the name <code>nrf52840_mdk.cmake</code>. This file must be located in <code>nrf5_SDK_for_Mesh_v2.0.1_src/CMake/board/</code>.</p>
<div class="codehilite"><pre><span></span><span class="c1"># nrf52840_mdk.cmake</span>
set<span class="o">(</span>nrf52840_mdk_DEFINES
    -DBOARD_CUSTOM
    -DCONFIG_GPIO_AS_PINRESET<span class="o">)</span>

set<span class="o">(</span>nrf52840_mdk_INCLUDE_DIRS
    <span class="s2">&quot;</span><span class="si">${</span><span class="nv">SDK_ROOT</span><span class="si">}</span><span class="s2">/components/boards&quot;</span><span class="o">)</span>
</pre></div>

<p>Specify the nRF52840-MDK board for the <code>nrf52840_xxAA</code> platform by adapting the <code>nrf5_SDK_for_Mesh_v2.0.1_src/CMake/Board.cmake</code> file to:</p>
<div class="codehilite"><pre><span></span>...

elseif <span class="o">(</span>PLATFORM STREQUAL <span class="s2">&quot;nrf52840_xxAA&quot;</span><span class="o">)</span>
    set<span class="o">(</span>BOARD <span class="s2">&quot;nrf52840_mdk&quot;</span> CACHE STRING <span class="s2">&quot;Board to build examples for.&quot;</span><span class="o">)</span>
    set_property<span class="o">(</span>CACHE BOARD PROPERTY STRINGS <span class="s2">&quot;nrf52840_mdk&quot;</span><span class="o">)</span>
</pre></div>

<h4 id="building-with-cmake">Building with CMake<a class="headerlink" href="#building-with-cmake" title="Permanent link">&para;</a></h4>
<p>Now you can try to build the mesh stack. Good practice is to create a build folder in the root directory for the mesh stack repository, where all artifacts generated by the Ninja build system are stored, such as:</p>
<div class="codehilite"><pre><span></span>nrf5_SDK_for_Mesh_v2.0.1_src $ mkdir build
nrf5_SDK_for_Mesh_v2.0.1_src $ <span class="nb">cd</span> build
</pre></div>

<p>Before you can build with Ninja, you must generate the correct build files with CMake.</p>
<p>You can specify the required <code>TOOLCHAIN</code>, <code>PLATFORM</code> and <code>BOARD</code> name to CMAKE. The build system will ensure a valid <code>SOFTDEVICE</code> for the given platform.</p>
<div class="codehilite"><pre><span></span>build $ cmake -G Ninja -DTOOLCHAIN<span class="o">=</span>gccarmemb -DPLATFORM<span class="o">=</span>nrf52840_xxAA -DBOARD<span class="o">=</span>nrf52840_mdk ..
</pre></div>

<p>After the Ninja build files are generated, running <code>ninja</code> will build all the targets (examples and libraries)</p>
<div class="codehilite"><pre><span></span>build $ ninja
</pre></div>

<p><img alt="" src="./images/build-mesh-with-cmake.png" /></p>
<h3 id="running-the-example">Running the example<a class="headerlink" href="#running-the-example" title="Permanent link">&para;</a></h3>
<p>To run examples onto your nRF52840-MDK, first connect it to your computer with a USB cable. When your board is detected, you can program examples as described below.</p>
<h4 id="programming-the-softdevice">Programming the SoftDevice<a class="headerlink" href="#programming-the-softdevice" title="Permanent link">&para;</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All examples built by the CMake-generated build system do not include the SoftDevice as part of the generated HEX files. Therefore, the SoftDevice must already be present on the device before flashing the HEX file for the example mesh application.</p>
</div>
<p>Download the SoftDevice which you chose to build mesh stack with. If you do not know the SoftDevice version that was used to build the mesh stack, check the name of the example binary.</p>
<p>For example, if the example's binary name is <code>light_switch_client_nrf52840_xxAA_s140_6.0.0.hex</code>, the required SoftDevice binary is <code>s140_nrf52_6.0.0_softdevice.hex</code>. To program this example run:</p>
<div class="codehilite"><pre><span></span>$ pyocd-flashtool -d debug -t nrf52 -se s140_nrf52_6.0.0_softdevice.hex
</pre></div>

<h4 id="programming-the-application">Programming the application<a class="headerlink" href="#programming-the-application" title="Permanent link">&para;</a></h4>
<p>To program the example binary mentioned above, run:</p>
<div class="codehilite"><pre><span></span>$ pyocd-flashtool -d debug -t nrf52 -se ./build/examples/light_switch/client/light_switch_client_nrf52840_xxAA_s140_6.0.0.hex
</pre></div>

<h2 id="creating-a-new-build">Creating a new build<a class="headerlink" href="#creating-a-new-build" title="Permanent link">&para;</a></h2>
<p>The easiest way to make a new build target is to:</p>
<ol>
<li>
<p>Copy one of the example folders, e.g., <code>examples/beaconing</code> to <code>examples/my_app</code>.</p>
</li>
<li>
<p>Add the folder to the <code>examples/CMakeLists.txt</code> with a <code>add_subdirectory(&quot;my_app&quot;)</code> command.</p>
</li>
<li>
<p>Modify the target name in the first line of <code>examples/my_app/CMakeLists.txt</code> to <code>set(target &quot;my_app&quot;)</code>.</p>
</li>
<li>
<p>Generating build files with
    <div class="codehilite"><pre><span></span>nrf5_SDK_for_Mesh_v2.0.1_src $ mkdir build
nrf5_SDK_for_Mesh_v2.0.1_src $ <span class="nb">cd</span> build
build $ cmake -G Ninja -DTOOLCHAIN<span class="o">=</span>gccarmemb -DPLATFORM<span class="o">=</span>nrf52840_xxAA -DBOARD<span class="o">=</span>nrf52840_mdk ..
</pre></div></p>
</li>
<li>
<p>Build your new target with
    <div class="codehilite"><pre><span></span>build $ ninja my_app
</pre></div></p>
</li>
</ol>
<h2 id="more-examples">More examples<a class="headerlink" href="#more-examples" title="Permanent link">&para;</a></h2>
<p>Over time, more example applications will be added to the repository. You can star or watch the <a href="https://github.com/makerdiary/nrf52840-mdk">nrf52840-mdk</a> repository to stay up to date.</p>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><a href="https://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF5-SDK-for-Mesh">Nordic nRF5 SDK for Mesh</a></p>
</li>
<li>
<p><a href="http://infocenter.nordicsemi.com/index.jsp">Nordic Semiconductor Infocenter</a></p>
</li>
<li>
<p><a href="https://github.com/makerdiary/nrf52840-mdk">makerdiary/nrf52840-mdk</a></p>
</li>
</ul>
<h2 id="create-an-issue">Create an Issue<a class="headerlink" href="#create-an-issue" title="Permanent link">&para;</a></h2>
<p>Interested in contributing to this project? Want to report a bug? Feel free and click here:</p>
<p><a href="https://github.com/makerdiary/nrf52840-mdk/issues/new"><button data-md-color-primary="marsala"><i class="fa fa-github"></i> Create an Issue</button></a></p>
                
                  
                
              
              
                


              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="discourse-comments"></div>
  <script>DiscourseEmbed={discourseUrl:"https://community.makerdiary.co/",discourseEmbedUrl:"https://wiki.makerdiary.co/nrf52840-mdk/mesh/"},function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=DiscourseEmbed.discourseUrl+"javascripts/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../nrf5-sdk/" title="nRF5 SDK" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                nRF5 SDK
              </span>
            </div>
          </a>
        
        
          <a href="../openthread/" title="OpenThread" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                OpenThread
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="https://makerdiary.com">makerdiary.com</a>
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://makerdiary.com" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/makerdiary" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/makerdiary" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.facebook.com/makerdiary" class="md-footer-social__link fa fa-facebook"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.daa92ae3.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:".."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-54344624-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>